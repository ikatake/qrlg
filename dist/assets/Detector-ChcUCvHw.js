function Y(n,t){var e=Object.setPrototypeOf;e?e(n,t):n.__proto__=t}function Z(n,t){t===void 0&&(t=n.constructor);var e=Error.captureStackTrace;e&&e(n,t)}var J=(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=i[a])},n(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),V=(function(n){J(t,n);function t(e,r){var o=this.constructor,i=n.call(this,e,r)||this;return Object.defineProperty(i,"name",{value:o.name,enumerable:!1,configurable:!0}),Y(i,o.prototype),Z(i),i}return t})(Error),tt=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),M=(function(n){tt(t,n);function t(e){e===void 0&&(e=void 0);var r=n.call(this,e)||this;return r.message=e,r}return t.prototype.getKind=function(){var e=this.constructor;return e.kind},t.kind="Exception",t})(V),nt=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),et=(function(n){nt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArgumentException",t})(M),rt=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),O=(function(n){rt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t})(M),G=(function(){function n(){}return n.arraycopy=function(t,e,r,o,i){for(;i--;)r[o++]=t[e++]},n.currentTimeMillis=function(){return Date.now()},n})(),it=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),ot=(function(n){it(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t})(M),at=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),q=(function(n){at(t,n);function t(e,r){e===void 0&&(e=void 0),r===void 0&&(r=void 0);var o=n.call(this,r)||this;return o.index=e,o.message=r,o}return t.kind="ArrayIndexOutOfBoundsException",t})(ot),st=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},D=(function(){function n(){}return n.fill=function(t,e){for(var r=0,o=t.length;r<o;r++)t[r]=e},n.fillWithin=function(t,e,r,o){n.rangeCheck(t.length,e,r);for(var i=e;i<r;i++)t[i]=o},n.rangeCheck=function(t,e,r){if(e>r)throw new O("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new q(e);if(r>t)throw new q(r)},n.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},n.create=function(t,e,r){var o=Array.from({length:t});return o.map(function(i){return Array.from({length:e}).fill(r)})},n.createInt32Array=function(t,e,r){var o=Array.from({length:t});return o.map(function(i){return Int32Array.from({length:e}).fill(r)})},n.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,o=t.length;r<o;r++)if(t[r]!==e[r])return!1;return!0},n.hashCode=function(t){var e,r;if(t===null)return 0;var o=1;try{for(var i=st(t),a=i.next();!a.done;a=i.next()){var s=a.value;o=31*o+s}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return o},n.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},n.copyOf=function(t,e){return t.slice(0,e)},n.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},n.copyOfRange=function(t,e,r){var o=r-e,i=new Int32Array(o);return G.arraycopy(t,e,i,0,o),i},n.binarySearch=function(t,e,r){r===void 0&&(r=n.numberComparator);for(var o=0,i=t.length-1;o<=i;){var a=i+o>>1,s=r(e,t[a]);if(s>0)o=a+1;else if(s<0)i=a-1;else return a}return-o-1},n.numberComparator=function(t,e){return t-e},n})(),L=(function(){function n(){}return n.numberOfTrailingZeros=function(t){var e;if(t===0)return 32;var r=31;return e=t<<16,e!==0&&(r-=16,t=e),e=t<<8,e!==0&&(r-=8,t=e),e=t<<4,e!==0&&(r-=4,t=e),e=t<<2,e!==0&&(r-=2,t=e),r-(t<<1>>>31)},n.numberOfLeadingZeros=function(t){if(t===0)return 32;var e=1;return t>>>16||(e+=16,t<<=16),t>>>24||(e+=8,t<<=8),t>>>28||(e+=4,t<<=4),t>>>30||(e+=2,t<<=2),e-=t>>>31,e},n.toHexString=function(t){return t.toString(16)},n.toBinaryString=function(t){return String(parseInt(String(t),2))},n.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},n.truncDivision=function(t,e){return Math.trunc(t/e)},n.parseInt=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),z=(function(){function n(t,e){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,e==null?this.bits=n.makeArray(t):this.bits=e)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var e=n.makeArray(t);G.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}},n.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},n.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},n.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},n.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,o=Math.floor(t/32),i=r[o];i&=~((1<<(t&31))-1);for(var a=r.length;i===0;){if(++o===a)return e;i=r[o]}var s=o*32+L.numberOfTrailingZeros(i);return s>e?e:s},n.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,o=Math.floor(t/32),i=~r[o];i&=~((1<<(t&31))-1);for(var a=r.length;i===0;){if(++o===a)return e;i=~r[o]}var s=o*32+L.numberOfTrailingZeros(i);return s>e?e:s},n.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},n.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new O;if(e!==t){e--;for(var r=Math.floor(t/32),o=Math.floor(e/32),i=this.bits,a=r;a<=o;a++){var s=a>r?0:t&31,u=a<o?31:e&31,l=(2<<u)-(1<<s);i[a]|=l}}},n.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},n.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new O;if(e===t)return!0;e--;for(var o=Math.floor(t/32),i=Math.floor(e/32),a=this.bits,s=o;s<=i;s++){var u=s>o?0:t&31,l=s<i?31:e&31,c=(2<<l)-(1<<u)&4294967295;if((a[s]&c)!==(r?c:0))return!1}return!0},n.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(t,e){if(e<0||e>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)===1)},n.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},n.prototype.xor=function(t){if(this.size!==t.size)throw new O("Sizes don't match");for(var e=this.bits,r=0,o=e.length;r<o;r++)e[r]^=t.bits[r]},n.prototype.toBytes=function(t,e,r,o){for(var i=0;i<o;i++){for(var a=0,s=0;s<8;s++)this.get(t)&&(a|=1<<7-s),t++;e[r+i]=a}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,o=this.bits,i=0;i<r;i++){var a=o[i];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,t[e-i]=a}if(this.size!==r*32){for(var s=r*32-this.size,u=t[0]>>>s,i=1;i<r;i++){var l=t[i];u|=l<<32-s,t[i-1]=u,u=l>>>s}t[r-1]=u}this.bits=t},n.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.size===e.size&&D.equals(this.bits,e.bits)},n.prototype.hashCode=function(){return 31*this.size+D.hashCode(this.bits)},n.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(e&7)===0&&(t+=" "),t+=this.get(e)?"X":".";return t},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},n})(),W;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(W||(W={}));const k=W;var ft=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),P=(function(n){ft(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t})(M),ut=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},y;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(y||(y={}));var b=(function(){function n(t,e,r){for(var o,i,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=t,this.name=r,typeof e=="number"?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=a,n.VALUE_IDENTIFIER_TO_ECI.set(t,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,l=0,c=u.length;l!==c;l++){var w=u[l];n.VALUES_TO_ECI.set(w,this)}try{for(var v=ut(a),g=v.next();!g.done;g=v.next()){var p=g.value;n.NAME_TO_ECI.set(p,this)}}catch(d){o={error:d}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(o)throw o.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new P("incorect value");var e=n.VALUES_TO_ECI.get(t);if(e===void 0)throw new P("incorect value");return e},n.getCharacterSetECIByName=function(t){var e=n.NAME_TO_ECI.get(t);if(e===void 0)throw new P("incorect value");return e},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.getName()===e.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(y.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(y.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(y.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(y.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(y.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(y.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(y.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(y.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(y.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(y.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(y.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(y.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(y.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(y.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(y.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(y.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(y.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(y.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(y.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(y.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(y.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(y.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(y.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(y.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(y.Big5,28,"Big5"),n.GB18030=new n(y.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(y.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),ht=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),lt=(function(n){ht(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t})(M),K=(function(){function n(){}return n.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},n.shouldDecodeOnFallback=function(t){return!n.isBrowser()&&t==="ISO-8859-1"},n.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(t){return typeof t=="string"?t:t.getName()},n.encodingCharacterSet=function(t){return t instanceof b?t:b.getCharacterSetECIByName(t)},n.decodeFallback=function(t,e){var r=this.encodingCharacterSet(e);if(n.isDecodeFallbackSupported(r)){for(var o="",i=0,a=t.length;i<a;i++){var s=t[i].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(r.equals(b.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new lt("Encoding "+this.encodingName(e)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(t){return t.equals(b.UTF8)||t.equals(b.ISO8859_1)||t.equals(b.ASCII)},n.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))),r=e.split(""),o=[],i=0;i<r.length;i++)o.push(r[i].charCodeAt(0));return new Uint8Array(o)},n})(),wt=(function(){function n(){}return n.castAsNonUtf8Char=function(t,e){e===void 0&&(e=null);var r=e?e.getName():this.ISO88591;return K.decode(new Uint8Array([t]),r)},n.guessEncoding=function(t,e){if(e!=null&&e.get(k.CHARACTER_SET)!==void 0)return e.get(k.CHARACTER_SET).toString();for(var r=t.length,o=!0,i=!0,a=!0,s=0,u=0,l=0,c=0,w=0,v=0,g=0,p=0,d=0,_=0,S=0,I=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,A=0;A<r&&(o||i||a);A++){var m=t[A]&255;a&&(s>0?(m&128)===0?a=!1:s--:(m&128)!==0&&((m&64)===0?a=!1:(s++,(m&32)===0?u++:(s++,(m&16)===0?l++:(s++,(m&8)===0?c++:a=!1))))),o&&(m>127&&m<160?o=!1:m>159&&(m<192||m===215||m===247)&&S++),i&&(w>0?m<64||m===127||m>252?i=!1:w--:m===128||m===160||m>239?i=!1:m>160&&m<224?(v++,p=0,g++,g>d&&(d=g)):m>127?(w++,g=0,p++,p>_&&(_=p)):(g=0,p=0))}return a&&s>0&&(a=!1),i&&w>0&&(i=!1),a&&(I||u+l+c>0)?n.UTF8:i&&(n.ASSUME_SHIFT_JIS||d>=3||_>=3)?n.SHIFT_JIS:o&&i?d===2&&v===2||S*10>=r?n.SHIFT_JIS:n.ISO88591:o?n.ISO88591:i?n.SHIFT_JIS:a?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var o=-1;function i(s,u,l,c,w,v){if(s==="%%")return"%";if(e[++o]!==void 0){s=c?parseInt(c.substr(1)):void 0;var g=w?parseInt(w.substr(1)):void 0,p;switch(v){case"s":p=e[o];break;case"c":p=e[o][0];break;case"f":p=parseFloat(e[o]).toFixed(s);break;case"p":p=parseFloat(e[o]).toPrecision(s);break;case"e":p=parseFloat(e[o]).toExponential(s);break;case"x":p=parseInt(e[o]).toString(g||16);break;case"d":p=parseFloat(parseInt(e[o],g||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(g);for(var d=parseInt(l),_=l&&l[0]+""=="0"?"0":" ";p.length<d;)p=u!==void 0?p+_:_+p;return p}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,i)},n.getBytes=function(t,e){return K.encode(t,e)},n.getCharCode=function(t,e){return e===void 0&&(e=0),t.charCodeAt(e)},n.getCharAt=function(t){return String.fromCharCode(t)},n.SHIFT_JIS=b.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=b.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=b.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),ct=(function(){function n(t){t===void 0&&(t=""),this.value=t}return n.prototype.enableDecoding=function(t){return this.encoding=t,this},n.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=wt.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},n.prototype.appendChars=function(t,e,r){for(var o=e;e<e+r;o++)this.append(t[o]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(t){return this.value.charAt(t)},n.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},n.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},n.prototype.substring=function(t,e){return this.value.substring(t,e)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},n})(),Q=(function(){function n(t,e,r,o){if(this.width=t,this.height=e,this.rowSize=r,this.bits=o,e==null&&(e=t),this.height=e,t<1||e<1)throw new O("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(t){for(var e=t.length,r=t[0].length,o=new n(r,e),i=0;i<e;i++)for(var a=t[i],s=0;s<r;s++)a[s]&&o.set(s,i);return o},n.parseFromString=function(t,e,r){if(t===null)throw new O("stringRepresentation cannot be null");for(var o=new Array(t.length),i=0,a=0,s=-1,u=0,l=0;l<t.length;)if(t.charAt(l)===`
`||t.charAt(l)==="\r"){if(i>a){if(s===-1)s=i-a;else if(i-a!==s)throw new O("row lengths do not match");a=i,u++}l++}else if(t.substring(l,l+e.length)===e)l+=e.length,o[i]=!0,i++;else if(t.substring(l,l+r.length)===r)l+=r.length,o[i]=!1,i++;else throw new O("illegal character encountered: "+t.substring(l));if(i>a){if(s===-1)s=i-a;else if(i-a!==s)throw new O("row lengths do not match");u++}for(var c=new n(s,u),w=0;w<i;w++)o[w]&&c.set(Math.floor(w%s),Math.floor(w/s));return c},n.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},n.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},n.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},n.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},n.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new O("input matrix dimensions do not match");for(var e=new z(Math.floor(this.width/32)+1),r=this.rowSize,o=this.bits,i=0,a=this.height;i<a;i++)for(var s=i*r,u=t.getRow(i,e).getBitArray(),l=0;l<r;l++)o[s+l]^=u[l]},n.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},n.prototype.setRegion=function(t,e,r,o){if(e<0||t<0)throw new O("Left and top must be nonnegative");if(o<1||r<1)throw new O("Height and width must be at least 1");var i=t+r,a=e+o;if(a>this.height||i>this.width)throw new O("The region must fit inside the matrix");for(var s=this.rowSize,u=this.bits,l=e;l<a;l++)for(var c=l*s,w=t;w<i;w++)u[c+Math.floor(w/32)]|=1<<(w&31)&4294967295},n.prototype.getRow=function(t,e){e==null||e.getSize()<this.width?e=new z(this.width):e.clear();for(var r=this.rowSize,o=this.bits,i=t*r,a=0;a<r;a++)e.setBulk(a*32,o[i+a]);return e},n.prototype.setRow=function(t,e){G.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new z(t),o=new z(t),i=0,a=Math.floor((e+1)/2);i<a;i++)r=this.getRow(i,r),o=this.getRow(e-1-i,o),r.reverse(),o.reverse(),this.setRow(i,o),this.setRow(e-1-i,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,o=this.bits,i=t,a=e,s=-1,u=-1,l=0;l<e;l++)for(var c=0;c<r;c++){var w=o[l*r+c];if(w!==0){if(l<a&&(a=l),l>u&&(u=l),c*32<i){for(var v=0;(w<<31-v&4294967295)===0;)v++;c*32+v<i&&(i=c*32+v)}if(c*32+31>s){for(var v=31;!(w>>>v);)v--;c*32+v>s&&(s=c*32+v)}}}return s<i||u<a?null:Int32Array.from([i,a,s-i+1,u-a+1])},n.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&e[r]===0;)r++;if(r===e.length)return null;for(var o=r/t,i=r%t*32,a=e[r],s=0;(a<<31-s&4294967295)===0;)s++;return i+=s,Int32Array.from([i,o])},n.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&e[r]===0;)r--;if(r<0)return null;for(var o=Math.floor(r/t),i=Math.floor(r%t)*32,a=e[r],s=31;!(a>>>s);)s--;return i+=s,Int32Array.from([i,o])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&D.equals(this.bits,e.bits)},n.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+D.hashCode(this.bits),t},n.prototype.toString=function(t,e,r){return t===void 0&&(t="X "),e===void 0&&(e="  "),r===void 0&&(r=`
`),this.buildToString(t,e,r)},n.prototype.buildToString=function(t,e,r){for(var o=new ct,i=0,a=this.height;i<a;i++){for(var s=0,u=this.width;s<u;s++)o.append(this.get(s,i)?t:e);o.append(r)}return o.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),vt=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),E=(function(n){vt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t})(M),T=(function(){function n(){}return n.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},n.distance=function(t,e,r,o){var i=t-r,a=e-o;return Math.sqrt(i*i+a*a)},n.sum=function(t){for(var e=0,r=0,o=t.length;r!==o;r++){var i=t[r];e+=i}return e},n})(),X=(function(){function n(){}return n.floatToIntBits=function(t){return t},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),U=(function(){function n(t,e){this.x=t,this.y=e}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(t){if(t instanceof n){var e=t;return this.x===e.x&&this.y===e.y}return!1},n.prototype.hashCode=function(){return 31*X.floatToIntBits(this.x)+X.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(t){var e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),o=this.distance(t[0],t[2]),i,a,s;if(r>=e&&r>=o?(a=t[0],i=t[1],s=t[2]):o>=r&&o>=e?(a=t[1],i=t[0],s=t[2]):(a=t[2],i=t[0],s=t[1]),this.crossProductZ(i,a,s)<0){var u=i;i=s,s=u}t[0]=i,t[1]=a,t[2]=s},n.distance=function(t,e){return T.distance(t.x,t.y,e.x,e.y)},n.crossProductZ=function(t,e,r){var o=e.x,i=e.y;return(r.x-o)*(t.y-i)-(r.y-i)*(t.x-o)},n})(),pt=(function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),H=(function(){function n(){}return n.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),o=t.getHeight(),i=!0,a=0;a<e.length&&i;a+=2){var s=Math.floor(e[a]),u=Math.floor(e[a+1]);if(s<-1||s>r||u<-1||u>o)throw new E;i=!1,s===-1?(e[a]=0,i=!0):s===r&&(e[a]=r-1,i=!0),u===-1?(e[a+1]=0,i=!0):u===o&&(e[a+1]=o-1,i=!0)}i=!0;for(var a=e.length-2;a>=0&&i;a-=2){var s=Math.floor(e[a]),u=Math.floor(e[a+1]);if(s<-1||s>r||u<-1||u>o)throw new E;i=!1,s===-1?(e[a]=0,i=!0):s===r&&(e[a]=r-1,i=!0),u===-1?(e[a+1]=0,i=!0):u===o&&(e[a+1]=o-1,i=!0)}},n})(),$=(function(){function n(t,e,r,o,i,a,s,u,l){this.a11=t,this.a21=e,this.a31=r,this.a12=o,this.a22=i,this.a32=a,this.a13=s,this.a23=u,this.a33=l}return n.quadrilateralToQuadrilateral=function(t,e,r,o,i,a,s,u,l,c,w,v,g,p,d,_){var S=n.quadrilateralToSquare(t,e,r,o,i,a,s,u),I=n.squareToQuadrilateral(l,c,w,v,g,p,d,_);return I.times(S)},n.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,o=this.a12,i=this.a13,a=this.a21,s=this.a22,u=this.a23,l=this.a31,c=this.a32,w=this.a33,v=0;v<e;v+=2){var g=t[v],p=t[v+1],d=i*g+u*p+w;t[v]=(r*g+a*p+l)/d,t[v+1]=(o*g+s*p+c)/d}},n.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,o=this.a12,i=this.a13,a=this.a21,s=this.a22,u=this.a23,l=this.a31,c=this.a32,w=this.a33,v=t.length,g=0;g<v;g++){var p=t[g],d=e[g],_=i*p+u*d+w;t[g]=(r*p+a*d+l)/_,e[g]=(o*p+s*d+c)/_}},n.squareToQuadrilateral=function(t,e,r,o,i,a,s,u){var l=t-r+i-s,c=e-o+a-u;if(l===0&&c===0)return new n(r-t,i-r,t,o-e,a-o,e,0,0,1);var w=r-i,v=s-i,g=o-a,p=u-a,d=w*p-v*g,_=(l*p-v*c)/d,S=(w*c-l*g)/d;return new n(r-t+_*r,s-t+S*s,t,o-e+_*o,u-e+S*u,e,_,S,1)},n.quadrilateralToSquare=function(t,e,r,o,i,a,s,u){return n.squareToQuadrilateral(t,e,r,o,i,a,s,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(t){return new n(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},n})(),gt=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),dt=(function(n){gt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.sampleGrid=function(e,r,o,i,a,s,u,l,c,w,v,g,p,d,_,S,I,A,m){var N=$.quadrilateralToQuadrilateral(i,a,s,u,l,c,w,v,g,p,d,_,S,I,A,m);return this.sampleGridWithTransform(e,r,o,N)},t.prototype.sampleGridWithTransform=function(e,r,o,i){if(r<=0||o<=0)throw new E;for(var a=new Q(r,o),s=new Float32Array(2*r),u=0;u<o;u++){for(var l=s.length,c=u+.5,w=0;w<l;w+=2)s[w]=w/2+.5,s[w+1]=c;i.transformPoints(s),H.checkAndNudgePoints(e,s);try{for(var w=0;w<l;w+=2)e.get(Math.floor(s[w]),Math.floor(s[w+1]))&&a.set(w/2,u)}catch{throw new E}}return a},t})(H),yt=(function(){function n(){}return n.setGridSampler=function(t){n.gridSampler=t},n.getInstance=function(){return n.gridSampler},n.gridSampler=new dt,n})(),C;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(C||(C={}));var _t=(function(){function n(t,e,r){this.value=t,this.stringValue=e,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(t,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(t){switch(t){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new et(t+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.forBits=function(t){if(t<0||t>=n.FOR_BITS.size)throw new O;return n.FOR_BITS.get(t)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(C.L,"L",1),n.M=new n(C.M,"M",0),n.Q=new n(C.Q,"Q",3),n.H=new n(C.H,"H",2),n})(),mt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},St=(function(){function n(t){this.errorCorrectionLevel=_t.forBits(t>>3&3),this.dataMask=t&7}return n.numBitsDiffering=function(t,e){return L.bitCount(t^e)},n.decodeFormatInformation=function(t,e){var r=n.doDecodeFormatInformation(t,e);return r!==null?r:n.doDecodeFormatInformation(t^n.FORMAT_INFO_MASK_QR,e^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(t,e){var r,o,i=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=mt(n.FORMAT_INFO_DECODE_LOOKUP),u=s.next();!u.done;u=s.next()){var l=u.value,c=l[0];if(c===t||c===e)return new n(l[1]);var w=n.numBitsDiffering(t,c);w<i&&(a=l[1],i=w),t!==e&&(w=n.numBitsDiffering(e,c),w<i&&(a=l[1],i=w))}}catch(v){r={error:v}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return i<=3?new n(a):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),Ot=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=(function(){function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var t,e,r=0,o=this.ecBlocks;try{for(var i=Ot(o),a=i.next();!a.done;a=i.next()){var s=a.value;r+=s.getCount()}}catch(u){t={error:u}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),f=(function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),It=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},At=(function(){function n(t,e){for(var r,o,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=i;var s=0,u=i[0].getECCodewordsPerBlock(),l=i[0].getECBlocks();try{for(var c=It(l),w=c.next();!w.done;w=c.next()){var v=w.value;s+=v.getCount()*(v.getDataCodewords()+u)}}catch(g){r={error:g}}finally{try{w&&!w.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}this.totalCodewords=s}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},n.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new P;try{return this.getVersionForNumber((t-17)/4)}catch{throw new P}},n.getVersionForNumber=function(t){if(t<1||t>40)throw new O;return n.VERSIONS[t-1]},n.decodeVersionInformation=function(t){for(var e=Number.MAX_SAFE_INTEGER,r=0,o=0;o<n.VERSION_DECODE_INFO.length;o++){var i=n.VERSION_DECODE_INFO[o];if(i===t)return n.getVersionForNumber(o+7);var a=St.numBitsDiffering(t,i);a<e&&(r=o+7,e=a)}return e<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new Q(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,o=0;o<r;o++)for(var i=this.alignmentPatternCenters[o]-2,a=0;a<r;a++)o===0&&(a===0||a===r-1)||o===r-1&&a===0||e.setRegion(this.alignmentPatternCenters[a]-2,i,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new h(7,new f(1,19)),new h(10,new f(1,16)),new h(13,new f(1,13)),new h(17,new f(1,9))),new n(2,Int32Array.from([6,18]),new h(10,new f(1,34)),new h(16,new f(1,28)),new h(22,new f(1,22)),new h(28,new f(1,16))),new n(3,Int32Array.from([6,22]),new h(15,new f(1,55)),new h(26,new f(1,44)),new h(18,new f(2,17)),new h(22,new f(2,13))),new n(4,Int32Array.from([6,26]),new h(20,new f(1,80)),new h(18,new f(2,32)),new h(26,new f(2,24)),new h(16,new f(4,9))),new n(5,Int32Array.from([6,30]),new h(26,new f(1,108)),new h(24,new f(2,43)),new h(18,new f(2,15),new f(2,16)),new h(22,new f(2,11),new f(2,12))),new n(6,Int32Array.from([6,34]),new h(18,new f(2,68)),new h(16,new f(4,27)),new h(24,new f(4,19)),new h(28,new f(4,15))),new n(7,Int32Array.from([6,22,38]),new h(20,new f(2,78)),new h(18,new f(4,31)),new h(18,new f(2,14),new f(4,15)),new h(26,new f(4,13),new f(1,14))),new n(8,Int32Array.from([6,24,42]),new h(24,new f(2,97)),new h(22,new f(2,38),new f(2,39)),new h(22,new f(4,18),new f(2,19)),new h(26,new f(4,14),new f(2,15))),new n(9,Int32Array.from([6,26,46]),new h(30,new f(2,116)),new h(22,new f(3,36),new f(2,37)),new h(20,new f(4,16),new f(4,17)),new h(24,new f(4,12),new f(4,13))),new n(10,Int32Array.from([6,28,50]),new h(18,new f(2,68),new f(2,69)),new h(26,new f(4,43),new f(1,44)),new h(24,new f(6,19),new f(2,20)),new h(28,new f(6,15),new f(2,16))),new n(11,Int32Array.from([6,30,54]),new h(20,new f(4,81)),new h(30,new f(1,50),new f(4,51)),new h(28,new f(4,22),new f(4,23)),new h(24,new f(3,12),new f(8,13))),new n(12,Int32Array.from([6,32,58]),new h(24,new f(2,92),new f(2,93)),new h(22,new f(6,36),new f(2,37)),new h(26,new f(4,20),new f(6,21)),new h(28,new f(7,14),new f(4,15))),new n(13,Int32Array.from([6,34,62]),new h(26,new f(4,107)),new h(22,new f(8,37),new f(1,38)),new h(24,new f(8,20),new f(4,21)),new h(22,new f(12,11),new f(4,12))),new n(14,Int32Array.from([6,26,46,66]),new h(30,new f(3,115),new f(1,116)),new h(24,new f(4,40),new f(5,41)),new h(20,new f(11,16),new f(5,17)),new h(24,new f(11,12),new f(5,13))),new n(15,Int32Array.from([6,26,48,70]),new h(22,new f(5,87),new f(1,88)),new h(24,new f(5,41),new f(5,42)),new h(30,new f(5,24),new f(7,25)),new h(24,new f(11,12),new f(7,13))),new n(16,Int32Array.from([6,26,50,74]),new h(24,new f(5,98),new f(1,99)),new h(28,new f(7,45),new f(3,46)),new h(24,new f(15,19),new f(2,20)),new h(30,new f(3,15),new f(13,16))),new n(17,Int32Array.from([6,30,54,78]),new h(28,new f(1,107),new f(5,108)),new h(28,new f(10,46),new f(1,47)),new h(28,new f(1,22),new f(15,23)),new h(28,new f(2,14),new f(17,15))),new n(18,Int32Array.from([6,30,56,82]),new h(30,new f(5,120),new f(1,121)),new h(26,new f(9,43),new f(4,44)),new h(28,new f(17,22),new f(1,23)),new h(28,new f(2,14),new f(19,15))),new n(19,Int32Array.from([6,30,58,86]),new h(28,new f(3,113),new f(4,114)),new h(26,new f(3,44),new f(11,45)),new h(26,new f(17,21),new f(4,22)),new h(26,new f(9,13),new f(16,14))),new n(20,Int32Array.from([6,34,62,90]),new h(28,new f(3,107),new f(5,108)),new h(26,new f(3,41),new f(13,42)),new h(30,new f(15,24),new f(5,25)),new h(28,new f(15,15),new f(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new h(28,new f(4,116),new f(4,117)),new h(26,new f(17,42)),new h(28,new f(17,22),new f(6,23)),new h(30,new f(19,16),new f(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new h(28,new f(2,111),new f(7,112)),new h(28,new f(17,46)),new h(30,new f(7,24),new f(16,25)),new h(24,new f(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new h(30,new f(4,121),new f(5,122)),new h(28,new f(4,47),new f(14,48)),new h(30,new f(11,24),new f(14,25)),new h(30,new f(16,15),new f(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new h(30,new f(6,117),new f(4,118)),new h(28,new f(6,45),new f(14,46)),new h(30,new f(11,24),new f(16,25)),new h(30,new f(30,16),new f(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new h(26,new f(8,106),new f(4,107)),new h(28,new f(8,47),new f(13,48)),new h(30,new f(7,24),new f(22,25)),new h(30,new f(22,15),new f(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new h(28,new f(10,114),new f(2,115)),new h(28,new f(19,46),new f(4,47)),new h(28,new f(28,22),new f(6,23)),new h(30,new f(33,16),new f(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new h(30,new f(8,122),new f(4,123)),new h(28,new f(22,45),new f(3,46)),new h(30,new f(8,23),new f(26,24)),new h(30,new f(12,15),new f(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new h(30,new f(3,117),new f(10,118)),new h(28,new f(3,45),new f(23,46)),new h(30,new f(4,24),new f(31,25)),new h(30,new f(11,15),new f(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new h(30,new f(7,116),new f(7,117)),new h(28,new f(21,45),new f(7,46)),new h(30,new f(1,23),new f(37,24)),new h(30,new f(19,15),new f(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new h(30,new f(5,115),new f(10,116)),new h(28,new f(19,47),new f(10,48)),new h(30,new f(15,24),new f(25,25)),new h(30,new f(23,15),new f(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new h(30,new f(13,115),new f(3,116)),new h(28,new f(2,46),new f(29,47)),new h(30,new f(42,24),new f(1,25)),new h(30,new f(23,15),new f(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new h(30,new f(17,115)),new h(28,new f(10,46),new f(23,47)),new h(30,new f(10,24),new f(35,25)),new h(30,new f(19,15),new f(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new h(30,new f(17,115),new f(1,116)),new h(28,new f(14,46),new f(21,47)),new h(30,new f(29,24),new f(19,25)),new h(30,new f(11,15),new f(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new h(30,new f(13,115),new f(6,116)),new h(28,new f(14,46),new f(23,47)),new h(30,new f(44,24),new f(7,25)),new h(30,new f(59,16),new f(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new h(30,new f(12,121),new f(7,122)),new h(28,new f(12,47),new f(26,48)),new h(30,new f(39,24),new f(14,25)),new h(30,new f(22,15),new f(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new h(30,new f(6,121),new f(14,122)),new h(28,new f(6,47),new f(34,48)),new h(30,new f(46,24),new f(10,25)),new h(30,new f(2,15),new f(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new h(30,new f(17,122),new f(4,123)),new h(28,new f(29,46),new f(14,47)),new h(30,new f(49,24),new f(10,25)),new h(30,new f(24,15),new f(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new h(30,new f(4,122),new f(18,123)),new h(28,new f(13,46),new f(32,47)),new h(30,new f(48,24),new f(14,25)),new h(30,new f(42,15),new f(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new h(30,new f(20,117),new f(4,118)),new h(28,new f(40,47),new f(7,48)),new h(30,new f(43,24),new f(22,25)),new h(30,new f(10,15),new f(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new h(30,new f(19,118),new f(6,119)),new h(28,new f(18,47),new f(31,48)),new h(30,new f(34,24),new f(34,25)),new h(30,new f(20,15),new f(61,16)))],n})(),Et=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),bt=(function(n){Et(t,n);function t(e,r,o){var i=n.call(this,e,r)||this;return i.estimatedModuleSize=o,i}return t.prototype.aboutEquals=function(e,r,o){if(Math.abs(r-this.getY())<=e&&Math.abs(o-this.getX())<=e){var i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,o){var i=(this.getX()+r)/2,a=(this.getY()+e)/2,s=(this.estimatedModuleSize+o)/2;return new t(i,a,s)},t})(U),xt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ft=(function(){function n(t,e,r,o,i,a,s){this.image=t,this.startX=e,this.startY=r,this.width=o,this.height=i,this.moduleSize=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var t=this.startX,e=this.height,r=this.width,o=t+r,i=this.startY+e/2,a=new Int32Array(3),s=this.image,u=0;u<e;u++){var l=i+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var c=t;c<o&&!s.get(c,l);)c++;for(var w=0;c<o;){if(s.get(c,l))if(w===1)a[1]++;else if(w===2){if(this.foundPatternCross(a)){var v=this.handlePossibleCenter(a,l,c);if(v!==null)return v}a[0]=a[2],a[1]=1,a[2]=0,w=1}else a[++w]++;else w===1&&w++,a[w]++;c++}if(this.foundPatternCross(a)){var v=this.handlePossibleCenter(a,l,o);if(v!==null)return v}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new E},n.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},n.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,o=0;o<3;o++)if(Math.abs(e-t[o])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(t,e,r,o){var i=this.image,a=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=t;u>=0&&i.get(e,u)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&!i.get(e,u)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=t+1;u<a&&i.get(e,u)&&s[1]<=r;)s[1]++,u++;if(u===a||s[1]>r)return NaN;for(;u<a&&!i.get(e,u)&&s[2]<=r;)s[2]++,u++;if(s[2]>r)return NaN;var l=s[0]+s[1]+s[2];return 5*Math.abs(l-o)>=2*o?NaN:this.foundPatternCross(s)?n.centerFromEnd(s,u):NaN},n.prototype.handlePossibleCenter=function(t,e,r){var o,i,a=t[0]+t[1]+t[2],s=n.centerFromEnd(t,r),u=this.crossCheckVertical(e,s,2*t[1],a);if(!isNaN(u)){var l=(t[0]+t[1]+t[2])/3;try{for(var c=xt(this.possibleCenters),w=c.next();!w.done;w=c.next()){var v=w.value;if(v.aboutEquals(l,u,s))return v.combineEstimate(u,s,l)}}catch(p){o={error:p}}finally{try{w&&!w.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}var g=new bt(s,u,l);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null},n})(),Ct=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Mt=(function(n){Ct(t,n);function t(e,r,o,i){var a=n.call(this,e,r)||this;return a.estimatedModuleSize=o,a.count=i,i===void 0&&(a.count=1),a}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,r,o){if(Math.abs(r-this.getY())<=e&&Math.abs(o-this.getX())<=e){var i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,o){var i=this.count+1,a=(this.count*this.getX()+r)/i,s=(this.count*this.getY()+e)/i,u=(this.count*this.estimatedModuleSize+o)/i;return new t(a,s,u,i)},t})(U),Nt=(function(){function n(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),R=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bt=(function(){function n(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(t){var e=t!=null&&t.get(k.TRY_HARDER)!==void 0,r=t!=null&&t.get(k.PURE_BARCODE)!==void 0,o=this.image,i=o.getHeight(),a=o.getWidth(),s=Math.floor(3*i/(4*n.MAX_MODULES));(s<n.MIN_SKIP||e)&&(s=n.MIN_SKIP);for(var u=!1,l=new Int32Array(5),c=s-1;c<i&&!u;c+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var w=0,v=0;v<a;v++)if(o.get(v,c))(w&1)===1&&w++,l[w]++;else if((w&1)===0)if(w===4)if(n.foundPatternCross(l)){var g=this.handlePossibleCenter(l,c,v,r);if(g===!0)if(s=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>l[2]&&(c+=p-l[2]-s,v=a-1)}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,w=3;continue}w=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,w=3;else l[++w]++;else l[w]++;if(n.foundPatternCross(l)){var g=this.handlePossibleCenter(l,c,a,r);g===!0&&(s=l[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var d=this.selectBestPatterns();return U.orderBestPatterns(d),new Nt(d)},n.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},n.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var o=t[r];if(o===0)return!1;e+=o}if(e<7)return!1;var i=e/7,a=i/2;return Math.abs(i-t[0])<a&&Math.abs(i-t[1])<a&&Math.abs(3*i-t[2])<3*a&&Math.abs(i-t[3])<a&&Math.abs(i-t[4])<a},n.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},n.prototype.crossCheckDiagonal=function(t,e,r,o){for(var i=this.getCrossCheckStateCount(),a=0,s=this.image;t>=a&&e>=a&&s.get(e-a,t-a);)i[2]++,a++;if(t<a||e<a)return!1;for(;t>=a&&e>=a&&!s.get(e-a,t-a)&&i[1]<=r;)i[1]++,a++;if(t<a||e<a||i[1]>r)return!1;for(;t>=a&&e>=a&&s.get(e-a,t-a)&&i[0]<=r;)i[0]++,a++;if(i[0]>r)return!1;var u=s.getHeight(),l=s.getWidth();for(a=1;t+a<u&&e+a<l&&s.get(e+a,t+a);)i[2]++,a++;if(t+a>=u||e+a>=l)return!1;for(;t+a<u&&e+a<l&&!s.get(e+a,t+a)&&i[3]<r;)i[3]++,a++;if(t+a>=u||e+a>=l||i[3]>=r)return!1;for(;t+a<u&&e+a<l&&s.get(e+a,t+a)&&i[4]<r;)i[4]++,a++;if(i[4]>=r)return!1;var c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-o)<2*o&&n.foundPatternCross(i)},n.prototype.crossCheckVertical=function(t,e,r,o){for(var i=this.image,a=i.getHeight(),s=this.getCrossCheckStateCount(),u=t;u>=0&&i.get(e,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(e,u)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&i.get(e,u)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=t+1;u<a&&i.get(e,u);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!i.get(e,u)&&s[3]<r;)s[3]++,u++;if(u===a||s[3]>=r)return NaN;for(;u<a&&i.get(e,u)&&s[4]<r;)s[4]++,u++;if(s[4]>=r)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-o)>=2*o?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,u):NaN},n.prototype.crossCheckHorizontal=function(t,e,r,o){for(var i=this.image,a=i.getWidth(),s=this.getCrossCheckStateCount(),u=t;u>=0&&i.get(u,e);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(u,e)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&i.get(u,e)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=t+1;u<a&&i.get(u,e);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!i.get(u,e)&&s[3]<r;)s[3]++,u++;if(u===a||s[3]>=r)return NaN;for(;u<a&&i.get(u,e)&&s[4]<r;)s[4]++,u++;if(s[4]>=r)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-o)>=o?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,u):NaN},n.prototype.handlePossibleCenter=function(t,e,r,o){var i=t[0]+t[1]+t[2]+t[3]+t[4],a=n.centerFromEnd(t,r),s=this.crossCheckVertical(e,Math.floor(a),t[2],i);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),t[2],i),!isNaN(a)&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),t[2],i)))){for(var u=i/7,l=!1,c=this.possibleCenters,w=0,v=c.length;w<v;w++){var g=c[w];if(g.aboutEquals(u,s,a)){c[w]=g.combineEstimate(s,a,u),l=!0;break}}if(!l){var p=new Mt(a,s,u);c.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},n.prototype.findRowSkip=function(){var t,e,r=this.possibleCenters.length;if(r<=1)return 0;var o=null;try{for(var i=R(this.possibleCenters),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.getCount()>=n.CENTER_QUORUM)if(o==null)o=s;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-s.getX())-Math.abs(o.getY()-s.getY()))/2)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var t,e,r,o,i=0,a=0,s=this.possibleCenters.length;try{for(var u=R(this.possibleCenters),l=u.next();!l.done;l=u.next()){var c=l.value;c.getCount()>=n.CENTER_QUORUM&&(i++,a+=c.getEstimatedModuleSize())}}catch(d){t={error:d}}finally{try{l&&!l.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}if(i<3)return!1;var w=a/s,v=0;try{for(var g=R(this.possibleCenters),p=g.next();!p.done;p=g.next()){var c=p.value;v+=Math.abs(c.getEstimatedModuleSize()-w)}}catch(d){r={error:d}}finally{try{p&&!p.done&&(o=g.return)&&o.call(g)}finally{if(r)throw r.error}}return v<=.05*a},n.prototype.selectBestPatterns=function(){var t,e,r,o,i=this.possibleCenters.length;if(i<3)throw new E;var a=this.possibleCenters,s;if(i>3){var u=0,l=0;try{for(var c=R(this.possibleCenters),w=c.next();!w.done;w=c.next()){var v=w.value,g=v.getEstimatedModuleSize();u+=g,l+=g*g}}catch(N){t={error:N}}finally{try{w&&!w.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}s=u/i;var p=Math.sqrt(l/i-s*s);a.sort(function(N,x){var F=Math.abs(x.getEstimatedModuleSize()-s),B=Math.abs(N.getEstimatedModuleSize()-s);return F<B?-1:F>B?1:0});for(var d=Math.max(.2*s,p),_=0;_<a.length&&a.length>3;_++){var S=a[_];Math.abs(S.getEstimatedModuleSize()-s)>d&&(a.splice(_,1),_--)}}if(a.length>3){var u=0;try{for(var I=R(a),A=I.next();!A.done;A=I.next()){var m=A.value;u+=m.getEstimatedModuleSize()}}catch(x){r={error:x}}finally{try{A&&!A.done&&(o=I.return)&&o.call(I)}finally{if(r)throw r.error}}s=u/a.length,a.sort(function(x,F){if(F.getCount()===x.getCount()){var B=Math.abs(F.getEstimatedModuleSize()-s),j=Math.abs(x.getEstimatedModuleSize()-s);return B<j?1:B>j?-1:0}else return F.getCount()-x.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),Rt=(function(){function n(t){this.image=t}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(k.NEED_RESULT_POINT_CALLBACK);var e=new Bt(this.image,this.resultPointCallback),r=e.find(t);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(t){var e=t.getTopLeft(),r=t.getTopRight(),o=t.getBottomLeft(),i=this.calculateModuleSize(e,r,o);if(i<1)throw new E("No pattern found in proccess finder.");var a=n.computeDimension(e,r,o,i),s=At.getProvisionalVersionForDimension(a),u=s.getDimensionForVersion()-7,l=null;if(s.getAlignmentPatternCenters().length>0)for(var c=r.getX()-e.getX()+o.getX(),w=r.getY()-e.getY()+o.getY(),v=1-3/u,g=Math.floor(e.getX()+v*(c-e.getX())),p=Math.floor(e.getY()+v*(w-e.getY())),d=4;d<=16;d<<=1)try{l=this.findAlignmentInRegion(i,g,p,d);break}catch(A){if(!(A instanceof E))throw A}var _=n.createTransform(e,r,o,l,a),S=n.sampleGrid(this.image,_,a),I;return l===null?I=[o,e,r]:I=[o,e,r,l],new pt(S,I)},n.createTransform=function(t,e,r,o,i){var a=i-3.5,s,u,l,c;return o!==null?(s=o.getX(),u=o.getY(),l=a-3,c=l):(s=e.getX()-t.getX()+r.getX(),u=e.getY()-t.getY()+r.getY(),l=a,c=a),$.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,l,c,3.5,a,t.getX(),t.getY(),e.getX(),e.getY(),s,u,r.getX(),r.getY())},n.sampleGrid=function(t,e,r){var o=yt.getInstance();return o.sampleGridWithTransform(t,r,r,e)},n.computeDimension=function(t,e,r,o){var i=T.round(U.distance(t,e)/o),a=T.round(U.distance(t,r)/o),s=Math.floor((i+a)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new E("Dimensions could be not found.")}return s},n.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},n.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?o/7:isNaN(o)?r/7:(r+o)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,o){var i=this.sizeOfBlackWhiteBlackRun(t,e,r,o),a=1,s=t-(r-t);s<0?(a=t/(t-s),s=0):s>=this.image.getWidth()&&(a=(this.image.getWidth()-1-t)/(s-t),s=this.image.getWidth()-1);var u=Math.floor(e-(o-e)*a);return a=1,u<0?(a=e/(e-u),u=0):u>=this.image.getHeight()&&(a=(this.image.getHeight()-1-e)/(u-e),u=this.image.getHeight()-1),s=Math.floor(t+(s-t)*a),i+=this.sizeOfBlackWhiteBlackRun(t,e,s,u),i-1},n.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,o){var i=Math.abs(o-e)>Math.abs(r-t);if(i){var a=t;t=e,e=a,a=r,r=o,o=a}for(var s=Math.abs(r-t),u=Math.abs(o-e),l=-s/2,c=t<r?1:-1,w=e<o?1:-1,v=0,g=r+c,p=t,d=e;p!==g;p+=c){var _=i?d:p,S=i?p:d;if(v===1===this.image.get(_,S)){if(v===2)return T.distance(p,d,t,e);v++}if(l+=u,l>0){if(d===o)break;d+=w,l-=s}}return v===2?T.distance(r+c,o,t,e):NaN},n.prototype.findAlignmentInRegion=function(t,e,r,o){var i=Math.floor(o*t),a=Math.max(0,e-i),s=Math.min(this.image.getWidth()-1,e+i);if(s-a<t*3)throw new E("Alignment top exceeds estimated module size.");var u=Math.max(0,r-i),l=Math.min(this.image.getHeight()-1,r+i);if(l-u<t*3)throw new E("Alignment bottom exceeds estimated module size.");var c=new Ft(this.image,a,u,s-a,l-u,t,this.resultPointCallback);return c.find()},n})();const Tt=Object.freeze(Object.defineProperty({__proto__:null,default:Rt},Symbol.toStringTag,{value:"Module"}));export{et as A,z as B,b as C,pt as D,M as E,P as F,yt as G,O as I,T as M,E as N,U as R,ct as S,lt as U,At as V,Q as a,G as b,L as c,wt as d,k as e,K as f,St as g,Rt as h,D as i,X as j,ot as k,Tt as l};
